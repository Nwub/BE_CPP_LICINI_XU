@startuml

title Sequence Diagram

control "Arduino Board" as AB
control "BatteryLevel Sensor" as BS
boundary "BatteryLevel LED" as BL
control "WaterLevel Sensor" as WS
boundary "WaterLevel LED" as WL
actor User
boundary "Watering Mode" as WM
entity "Irrigation System" as IS
control "Environment Sensors" as ES

User -> WM : setWateringMode()

activate AB

AB -> BS ++ : getBatteryLevel()
BS -> BS : batteryLevelCheck()
return BatteryLevel

alt Battery Level LOW
AB -> BL ++ : set(ON)
BL --> BL : state=ON
else Battery Level OK
deactivate BL
end

AB -> WS ++ : getWaterLevel()
WS -> WS : waterLevelCheck()
return WaterLevel

alt Water Level LOW
AB -> WL ++ : set(ON)
WL --> WL : state=ON
else Water Level OK
deactivate WL
end

AB -> ES ++ : getEnvironmentVar()
ES -> ES : environmentCheck()
return EnvironmentVar
AB -> WM : getMode()
AB <-- WM : Mode

alt Watering Condition OK
AB -> IS ++ : set(ON)
IS -> IS : watering()
deactivate IS
else Watering Condition Not-OK
end

alt User Manual Input
User -> IS ++ : set(ON)
IS -> IS : watering()
deactivate IS
end

@enduml